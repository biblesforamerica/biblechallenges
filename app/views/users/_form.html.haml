= form_for @user do |f|
  - if @user.errors.any?
    - flash[:error] = @user.errors.full_messages.to_sentence

  .form-group
    = f.label :name, I18n.t("users._form.name"), class: "control-label"
    = f.text_field :name, class: "form-control"
    %p.help-block

  .form-group
    = f.label :time_zone, I18n.t("users._form.tz")
    = f.collection_select :time_zone, ActiveSupport::TimeZone.all, :name, :to_s, {prompt: I18n.t("users._form.tz")}, {class: "form-control"}
    %p.help-block

  .form-group
    = f.label :preferred_reading_hour, I18n.t("users._form.hour")
    = f.collection_select :preferred_reading_hour, (0..23).map {|n| number_to_hour_of_day(n)}, :to_i, :to_s, {prompt: I18n.t("users._form.hour")}, {class: "form-control"}
    %p.help-block
      = t "users._form.sent_at"
      #{number_to_hour_of_day(f.object.preferred_reading_hour)}
      #{ActiveSupport::TimeZone[f.object.time_zone]}

  .form-group
    = f.label :avatar, I18n.t("users._form.avatar")
    = f.file_field :avatar, {class: "form-control"}
    %p.help-block

    = f.label :avatar, I18n.t("users._form.current_avatar")
    %br
    = render 'shared/avatar', user: current_user
    %br
    %br

  .form-group
    = f.submit class: 'btn btn-primary', disable_with: I18n.t("users._form.wait")

%p
  = link_to I18n.t("users._form.change"), edit_user_registration_url
%p
  = t "users._form.select_language"
  = link_to_unless_current "English", locale: "en"
  = link_to_unless_current "Spanish", locale: "es"

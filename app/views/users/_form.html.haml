= form_for @user do |f|
  - if @user.errors.any?
    - flash[:error] = @user.errors.full_messages.to_sentence

  .form-group
    = f.label :name, "Name", class: "control-label"
    = f.text_field :name, class: "form-control"
    %p.help-block

  .form-group
    = f.label :time_zone, "Your Time Zone"
    = f.collection_select :time_zone, ActiveSupport::TimeZone.all, :name, :to_s, {prompt: "Yout Time Zone"}, {class: "form-control"}
    %p.help-block

  .form-group
    .row
      = f.check_box :reading_notify, {class: "checkbox-inline"}
      = f.label :reading_notify, "Receive daily readings by email?", class: "checkbox-inline"

  .form-group
    = f.label :preferred_reading_hour, "Your Preferred Reading Hour"
    = f.collection_select :preferred_reading_hour, (0..23).map {|n| number_to_hour_of_day(n)}, :to_i, :to_s, {prompt: "Yout Preferred Reading Hour"}, {class: "form-control"}
    %p.help-block
      Your daily reading e-mails will be sent out at
      #{number_to_hour_of_day(f.object.preferred_reading_hour)}
      #{ActiveSupport::TimeZone[f.object.time_zone]}

  .form-group.form-inline
    .row
      = f.check_box :creator_notify, {class: "checkbox-inline"}
      = f.label :creator_notify, "Receive notices from challenge admins?", class: "checkbox-inline"

  .form-group
    .row
      = f.check_box :comment_notify, {class: "checkbox-inline"}
      = f.label :comment_notify, "Receive notices of new Group comments?", class: "checkbox-inline"

  .form-group
    %br
    = f.label :avatar, "Avatar"
    = f.file_field :avatar, {class: "form-control"}
    %p.help-block

    = f.label :avatar, "Current avatar:    "
    %br
    = render 'shared/avatar', user: current_user || @user
    %br
    %br

  .form-group
    = f.submit class: 'btn btn-primary', disable_with: 'Please Wait...'

%p
  = link_to "Change your account password", edit_user_registration_url

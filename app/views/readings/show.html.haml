- breadcrumb :reading, @reading
.container
  %br
  = breadcrumbs

  %br
  %br

  %legend
    = "#{@reading.chapter.book_and_chapter}"

  #verses

    - @verses.each do |verse|
      = verse.decorate.to_div
    %br
  -if @verses.first.version == "RCV"
    %center
      %strong
        Verses accessed from the Holy Bible Recovery Version (text-only edition) Â© 2012 Living Stream Ministry www.lsm.org

  %hr

  .row-fluid

    %div{style: "display: flex; flex-wrap: wrap;"}
      %div{style: "flex: 1;"}
        .centered
          Click to Confirm you read this challenge chapter:
          %td{id: dom_id(@reading)}
            - if @membership
              = react_component 'ReadingButton',
                { reading_id: @reading.id, membership_id: @membership.id,
              membership_reading_id: @membership.membership_readings.find{|mr| mr.reading_id == @reading.id && mr.membership_id = @membership.id}.try(:id) } 
          %br
          - unless @reading.last_challenge_reading?
            Next Chapter >> 
            = link_to @reading.next_reading.chapter.book_and_chapter, reading_path(@reading.next_reading)
            %br
            %br
          = button_to "Back to Challenge", member_challenge_path(@membership.challenge), :method => :get

      %div{style: "flex: 1; padding: 10px;"}
        %h5 Reading Comments
        = react_component("CommentList", {commentableType: "Reading", commentableId: @reading.id, comments: @comments_json, currentUser: @current_user_json})
  %br
  %br
.row
  .col-sm-12
    %h3
      =group.name
      .badge
        = group.members.count
        = I18n.t("shared.groups._show.member").pluralize(group.members.count)
    %br
    /instant hangout not working properly
    /= instant_hangout


%table.table.table-striped.table-bordered.table-hover
  %thead
    %tr
      %th
        = t "shared.groups._show.members"
      %th
        = t "shared.groups._show.chapters"
      %th
        = t "shared.groups._show.last"
  %tbody
  - group.members.each do |m|
    %tr
      %td
        = render 'shared/avatar', user: m
        %span
          = m.decorate.name
      %td= m.membership_readings.size
      - if m.has_logged_a_reading?(m, group)
        %td= m.decorate.show_last_recorded_reading(m, group)
      - else
        %td
          = t "shared.groups._show.none_yet"

.row
  .col-sm-12
    .pull-right
      - if current_user
        - if current_user.groups.include?(group)
          - if group.user_id == current_user.id
            = link_to "Delete Group", member_group_path(id: group.id), :class=>"btn btn-danger", method: :delete, data: {confirm: "STOP! Deleting this group will remove all members from this group. This cannot be undone. Are you SURE you want to delete this group?"}
            = link_to "Edit Group", edit_member_group_path(id: group.id), :class=>"btn btn-warning"
          -else
            = link_to I18n.t("shared.groups._show.leave"), leave_member_group_path(id: group.id), :class=>"btn btn-info", method: :post, data: {confirm: I18n.t("shared.groups._show.confirm2")}
        -else
          = link_to I18n.t("shared.groups._show.join"), join_member_group_path(id: group.id), :class=> "btn btn-primary", method: :post
      - else
        = link_to I18n.t("shared.groups._show.signup"), new_user_registration_path, :class=> "btn btn-primary"
      %span
%br

.row
  .col-sm-12
    %h4
      = t "shared.groups._show.comment"
    = render partial: 'groups/comment_form', locals: {comment: Comment.new, group: group}

.row
  .col-sm-12
    = render partial: 'groups/comments', locals: {comments: group.comments, group: group}

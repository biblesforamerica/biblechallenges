.row
  .col-sm-12
    %h3
      =group.name
      .badge
        = group.members.count
        = "member".pluralize(group.members.count)
    %br
    /instant hangout not working properly
    /= instant_hangout


%table.table.table-striped.table-bordered.table-hover
  %thead
    %tr
      %th Members
      %th Chapters Read
      %th Last Read
  %tbody
  - group.memberships.each do |membership|
    %tr
      %td
        = render 'shared/avatar_medium', user: membership.user
        %span
          = membership.user.decorate.name
      %td= membership.membership_readings.size
      - unless membership.membership_readings.empty?
        %td= membership.user.decorate.show_last_recorded_reading(membership)
      - else
        %td
          No readings yet

.row
  .col-sm-12
    .pull-right
      - if current_user
        - if current_user.groups.include?(group)
          - if group.user_id == current_user.id
            = link_to "Delete Group", member_group_path(id: group.id), :class=>"btn btn-danger", method: :delete, data: {confirm: "STOP! Deleting this group will remove all members from this group. This cannot be undone. Are you SURE you want to delete this group?"}
            = link_to "Edit Group", edit_member_group_path(id: group.id), :class=>"btn btn-warning"
          -else
            = link_to "Leave Group", leave_member_group_path(id: group.id), :class=>"btn btn-info", method: :post, data: {confirm: "Are you sure you want to leave this group?"}
        -else
          = link_to "Join Group", join_member_group_path(id: group.id), :class=> "btn btn-primary", method: :post
      - else
        = link_to "Sign me up", new_user_registration_path, :class=> "btn btn-primary"
      %span
%br


.row
  .col-sm-12
    %h4 Group Comments
    = render partial: 'groups/comment_form', locals: {comment: Comment.new, group: group}


.row
  .col-sm-12
    = render partial: 'groups/comments', locals: {comments: group.comments, group: group}

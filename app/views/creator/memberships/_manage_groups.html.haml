.container
  %h2
    Challenge:
    = link_to "#{@challenge.name}", challenge_path(@challenge), title: "Back to Challenge"
  %table.table.table-striped.table-bordered.table-hover
    %thead
      %tr
        %th
          %span
            Challenge Member
            %br
            (*) Group Owner
        %th Current Group
        %th Completed
        %th Last Read
        %th Assign to Group
    %tbody
      %tr
        %td
          = render 'shared/avatar_medium', user: @membership.user
          - if @challenge.owner == @membership.user
            %span
              = "#{@membership.user.decorate.name} (*)"
          - else 
            %span
              = @membership.user.decorate.name
        %td= @membership.group.try(:name)
        %td= @membership.x_of_total_read
        - unless @membership.membership_readings.empty?
          %td
            = time_ago_in_words(@membership.last_recorded_reading_time)
            ago
        - else
          %td
            No readings
        %td
          = form_for [:creator, @membership], html: {class: 'form-horizontal'} do |f|
            = f.collection_select(:group_id, @all_challenge_groups, :id, :name)
            = f.hidden_field :challenge_id, :value => @challenge.id
            = f.submit 'Update', class: 'btn btn-primary'
          /%td= link_to "Remove", creator_remove_member_from_challenge_path(id: @membership.id), method: :post, "data-confirm" => 'Are you sure you want to remove this member from the challenge?', :class => "btn btn-danger btn-sm", :id => "remove_#{@membership.id}"

%table.table.table-striped.table-bordered.table-hover
  %thead
    %tr
      %th Name
      %th Group
      %th Email
      %th Completed
      %th Last Read
      %th Action
  %tbody
  - challenge.memberships.by_group.each do |membership|
    %tr
      %td
        = render 'shared/avatar_medium', user: membership.user
        - if challenge.owner == membership.user
          %span
            = "#{membership.user.decorate.name} (Owner)"
        - else 
          %span
            = membership.user.decorate.name
      %td= membership.group.try(:name)
      %td= mail_to(membership.user.email)
      %td= membership.x_of_total_read
      - unless membership.membership_readings.empty?
        %td
          = time_ago_in_words(membership.last_recorded_reading_time)
          ago
      - else
        %td
          No readings yet
      - if challenge.owner == membership.user
        %td= "N/A"
      - else
        %td= link_to "Remove", creator_remove_member_from_challenge_path(id: membership.id), method: :post, "data-confirm" => 'Are you sure you want to remove this member from the challenge?', :class => "btn btn-danger btn-sm", :id => "remove_#{membership.id}"

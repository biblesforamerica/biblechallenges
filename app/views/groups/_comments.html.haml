- unless comments.empty?
  %table.table.table-striped.table-bordered.table-hover
    - comments.each do |c|
      %tr
        %td 
          %di
            %i= c.content
          %div
            %b
              \-- #{render 'shared/avatar_for_comment', user: c.user} #{c.user.name}
            = time_ago_in_words(c.created_at)
            ago
            |
            = link_to "respond", "#", class: "respond-comment"
            .comments
              - if c.comments.any?
                %ul
                  - c.comments.each do |c|
                    %li
                      = c.content
                      %b
                        \-- #{render 'shared/avatar_for_comment', user: c.user} #{c.user.name}
                      = time_ago_in_words(c.created_at)
                      ago
              = render "comments/comments/form", {commentable: c, location: member_challenge_path(group.challenge, anchor: "mygroup")}
          - if c.user == current_user
            %div
              = link_to "Delete", [group, c], method: :delete, confirm: "Are you sure you want to delete this comment?"


- content_for :javascripts do
  :javascript
    $(".respond-comment").click(function (evt) {
      evt.preventDefault();
      evt.stopPropagation();
      $(this).next('.comments').find('.comment-form').removeClass('hide');
    });

%table.table.table-striped.table-bordered.table-hover.table-centered-text
  %tbody
    - if current_user && membership = @challenge.membership_for(current_user)
      %thead
        %tr
          %th Date
          %th Chapter
          %th Comments
      - membership.membership_readings.each do |mr|
        %tr
          %td= mr.reading.date.strftime("%a, %-d %b %Y")
          %td= link_to mr.reading.chapter.book_and_chapter, mr.reading
          %td= link_to mr.reading.comments.count, mr.reading
          %td{class: reading_row_class(mr),id: "reading_tr_#{mr.id}"}
            - if mr.state == 'unread'
              = form_for(mr) do
                = submit_tag "Confirm", class: 'btn btn-primary btn-xs', disable_with: 'Please wait...'
            - else
              = form_for(mr) do
                = submit_tag "Unconfirm", class: 'btn btn-primary btn-xs', disable_with: 'Please wait...'



    - else
      %thead
        %tr
          %th Date
          %th Chapter
      - @readings.each do |reading|
        %tr
          %td= reading.date.strftime("%a, %-d %b %Y")
          %td= reading.chapter.book_and_chapter
